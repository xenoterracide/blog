+++
title = "Teaching Perl - Week 2"
date = 2010-04-18T22:15:00Z
updated = 2010-04-18T23:08:48Z
tags = ["baker",  "perl", "teaching perl", "curriculum"]
blogimport = true 
type = "post"
+++

<ul><li><a href="http://xenoterracide.blogspot.com/2010/04/teaching-perl-part-0-preface.html">Week 0</a></li><li><a href="http://xenoterracide.blogspot.com/2010/04/teaching-perl-week-1-part1.html">Week 1 (part 1)</a></li><li><a href="http://xenoterracide.blogspot.com/2010/04/teaching-perl-week-1-part2.html">Week 1 (part 2)</a></li></ul><h2>Guess the Number</h2>So our little game is exceptionally mediocre and not very fun. <a target="_blank"  href="http://www.amazon.com/Head-First-Programming-Learners-Language/dp/0596802374?ie=UTF8&tag=xenotsblog-20&link_code=btl&camp=213689&creative=392969">Head First Programming: A Learner&#39;s Guide to Programming Using the Python Language</a><img src="http://www.assoc-amazon.com/e/ir?t=xenotsblog-20&l=btl&camp=213689&creative=392969&o=1&a=0596802374" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /> suggests we give the game player some help by telling them if the number is lower or Higher.<script src="http://gist.github.com/370592.js"></script><noscript><pre><code><br />use feature 'say';<br />use strict;<br />use warnings;<br /><br />say "welcome";<br /><br />say "Guess the number: ";<br />my $guess = readline(*STDIN);<br /><br />if ( $guess == 5 ) {<br />        say "You Win!";<br />}<br />elsif ( $guess > 5 ) {<br />        say "Too high";<br />}<br />else {<br />        say "Too low";<br />}<br />say "Game over!";<br /></code></pre></noscript><br /><br />This game is a lot less challenging, and still not very good. So one one of the problems is it exits instead of letting it try till we get it right. So lets change that.<script src="http://gist.github.com/370613.js"></script><noscript><pre><code>use feature 'say';<br />use strict;<br />use warnings;<br /><br />say "welcome";<br /><br />my $guess = 0;<br />until ( $guess == 5 ) {<br />        say "Guess the number: ";<br />        $guess = readline(*STDIN);<br /><br />        if ( $guess == 5 ) {<br />                say "You Win!";<br />        }<br />        elsif ( $guess > 5 ) {<br />                say "Too high";<br />        }<br />        else {<br />                say "Too low";<br />        }<br />}<br />say "Game over!";<br /></code></pre></noscript><br /><br />This one is going to show your students something they likely haven't seen before. An <code><a href="http://perldoc.perl.org/perlsyn.html#Statement-Modifiers">until</a></code> statement. <code>until</code> is logically equivalent to <code>while not</code> or in this case you could write <code>while ( $guess != 5 ) {...}</code> and have it do exactly the same thing.<br /><br />We've got some bad practices in this code it lacks useful comments and uses a magic number. Also the instructions aren't clear if you don't know how the program is written. Let's add that stuff next.<script src="http://gist.github.com/370622.js"></script><noscript><pre><code>#!/usr/bin/env perl<br /># guess a number game<br />use feature 'say';<br />use strict;<br />use warnings;<br /><br />say "welcome";<br /><br />my $winning_num = 5;<br /><br />my $guess = 0; #initialize outside of loop so loop executes properly<br />until ( $guess == $winning_num ) {<br /><br />        say "Guess a number between 1 and 10: ";<br />        # get the number from the user<br />        $guess = readline(*STDIN);<br /><br />        # check to see if we have a winner, or the guess is too high, or low.<br />        if ( $guess == $winning_num ) {<br />                say "You Win!";<br />        }<br />        elsif ( $guess > $winning_num ) {<br />                say "Too high";<br />        }<br />        else {<br />                say "Too low";<br />        }<br />}<br />say "Game over!";</code></pre></noscript><br />So this code is too simple for comments, but I've tried to show what I think some good ones would be. Usually 'novice' books say use meaningful comments but don't show any. Students then end up writing comments like <code># initialize local variable guess to 0</code>. That's not useful the code obviously says that. Instead comments should say, what a larger chunk of is trying to do, or why it's doing it that way.<br /><br />In <a target="_blank"  href="http://www.amazon.com/Head-First-Programming-Learners-Language/dp/0596802374?ie=UTF8&tag=xenotsblog-20&link_code=btl&camp=213689&creative=392969">Head First Programming: A Learner&#39;s Guide to Programming Using the Python Language</a><img src="http://www.assoc-amazon.com/e/ir?t=xenotsblog-20&l=btl&camp=213689&creative=392969&o=1&a=0596802374" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /> the author uses the variable <code>secret</code> where I've used <code>$winning_num</code> because he ends up using a random number generator (we will in a moment), however, this is not a very descriptive name. <code>$winning_num</code> is a better name because it's more descriptive of what the number actually is. He also skips removing the 'magic numbers' step which is probably why the variable name used is poor.<br /><br />So let's make the winning number random.<script src="http://gist.github.com/370650.js"></script><noscript><pre><code>use feature 'say';<br />use strict;<br />use warnings;<br /><br />say "welcome";<br /><br /># generate the winning number between 1 and 10<br />my $winning_num = int( rand(10) );<br /><br />my $guess = 0; #initialize outside of loop so loop executes properly<br />until ( $guess == $winning_num ) {<br /><br />        say "Guess a number between 1 and 10: ";<br />        # get the number from the user<br />        $guess = readline(*STDIN);<br /><br />        # check to see if we have a winner, or the guess is to high, or low.<br />        if ( $guess == $winning_num ) {<br />                say "You Win!";<br />        }<br />        elsif ( $guess > $winning_num ) {<br />                say "Too high";<br />        }<br />        else {<br />                say "Too low";<br />        }<br />}<br />say "Game over!";</code></pre></noscript><br /><br />There we go... Now are number is random. ... ... ... notice the logic error yet? no? go read the <a href="http://perldoc.perl.org/functions/rand.html">rand</a> documentation. Got it now? ok simply put this generates 10 total possible random numbers starting at 0, e.g 0-9. Our code isn't broken but it's not doing what we want. But the docs don't say how to generate a range... how can I do that? run <code>perldoc -q random</code> this will return perlfaq4 we're looking for <a href="http://perldoc.perl.org/perlfaq4.html#How-do-I-get-a-random-number-between-X-and-Y%3f">How do I get a random number between X and Y?</a>. That tells us how to fix it... our code should now look something like.<script src="http://gist.github.com/370661.js"></script><noscript><pre><code>use feature 'say';<br />use strict;<br />use warnings;<br /><br />say "welcome";<br /><br /># generate the winning number between 1 and 10<br /># see perlfaq4 for algorithm details<br />my $winning_num = 1 + int( rand( (10-1)+1 ) );<br /><br />my $guess = 0; #initialize outside of loop so loop executes properly<br />until ( $guess == $winning_num ) {<br /><br />        say "Guess a number between 1 and 10: ";<br />        # get the number from the user<br />        $guess = readline(*STDIN);<br /><br />        # check to see if we have a winner, or the guess is to high, or low.<br />        if ( $guess == $winning_num ) {<br />                say "You Win!";<br />        }<br />        elsif ( $guess > $winning_num ) {<br />                say "Too high";<br />        }<br />        else {<br />                say "Too low";<br />        }<br />}<br />say "Game over!";</code></pre></noscript><br /><br />we could just put 10 in rand in this case but that's not as flexible. You'll also note I commented on why we did it that way. Kind of a way of making sure no one goes back to the other way, it also tells people why we did it this way.<br /><br />If you've used another language you might ask, "Why not use a switch case?". Most instructors and books say "perl doesn't have a switch case". Even <a href="http://perldoc.perl.org/perlintro.html#Conditional-and-looping-constructs">perl intro</a> still falsely states that <blockquote>"Perl has most of the usual conditional and looping constructs except for case/switch (but if you really want it, there is a Switch module in Perl 5.8 and newer, and on CPAN."</blockquote>. That's even worse! Switch.pm has been in core for a while now... but is deprecated an you should <strong>NOT</strong> use it. since perl 5.10.0 perl has had a <a href="http://perldoc.perl.org/perlsyn.html#Switch-statements">Switch statement</a>, so let's rewrite our code using that.<script src="http://gist.github.com/370673.js"></script><noscript><pre><code>use feature 'say';<br />use feature 'switch';<br />use strict;<br />use warnings;<br /><br />say "welcome";<br /><br /># generate the winning number between 1 and 10<br /># see perlfaq4 for algorithm details<br />my $winning_num = 1 + int( rand( (10-1)+1 ) );<br /><br />my $guess = 0; #initialize outside of loop so loop executes properly<br />until ( $guess == $winning_num ) {<br /><br />        say "Guess a number between 1 and 10: ";<br />        # get the number from the user<br />        $guess = readline(*STDIN);<br /><br />        # check to see if we have a winner, or the guess is to high, or low.<br />        given( $guess ) {<br />                when ( $_ > $winning_num ) {<br />                        say "Too high";<br />                }<br />                when ( $_ < $winning_num ) {<br />                        say "Too low";<br />                }<br />                when ( $winning_num ) {<br />                        say "You Win!";<br />                }<br />        }<br />}<br />say "Game over!";</code></pre></noscript><br /><br />Note the use of <code>use feature 'switch';</code> make sure you use this instead of <code>use Switch;</code> which will use the now deprecated Switch.pm module.<br /><br />You can shorten <code>use feature 'say'; use feature 'switch';</code> to <code>use feature qw(say switch);</code>.<br /><br />Beside's introducing switch/case this introduces the default argument <code>$_</code> and smart matching.<br /><br />You'll also note that I changed the algorithm but my comments didn't change.<br /><br />As you can see <a href="http://en.wikipedia.org/wiki/There's_more_than_one_way_to_do_it">TIMTOWTDI</a>.<br /><br /><h2>Homework</h2>What else is wrong with our game? how could we fix it? How could we prevent the problem from being reintroduced? How can we be sure that our random problem is actually fixed? and make sure that it's not reintroduced? Can you think of any other ways we can write this program? or any other improvements? write the program so that it has 3 difficulty levels easy, medium, hard with  ranges 1-10,1-100,1-1000 respectively. Blog these to Iron Man.<br /><br />Optional: if you have <a target="_blank"  href="http://www.amazon.com/Programming-Principles-Practice-Using-C/dp/0321543726?ie=UTF8&tag=xenotsblog-20&link_code=btl&camp=213689&creative=392969">Programming: Principles and Practice Using C++</a><img src="http://www.assoc-amazon.com/e/ir?t=xenotsblog-20&l=btl&camp=213689&creative=392969&o=1&a=0321543726" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important; padding: 0px !important" /> have your students do Drill 1 from chapter 3 (obviously in perl not c++).<div class="blogger-post-footer"><br />--<br />
This <span xmlns:dc="http://purl.org/dc/elements/1.1/" href="http://purl.org/dc/dcmitype/Text" rel="dc:type">work</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.xenoterracide.com" property="cc:attributionName" rel="cc:attributionURL">Caleb Cushing</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.</div>
