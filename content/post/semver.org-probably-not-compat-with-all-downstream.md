+++
title = "Semver.org probably not compat with all downstream"
date = 2010-06-13T17:57:00Z
updated = 2010-06-13T20:16:37Z
tags = ["semantic",  "versions"]
blogimport = true 
type = "post"
+++

For those that don't know I currently create packages for <a href="http://aur.archlinux.org/packages.php?SeB=m&L=2&K=xenoterracide">AUR</a>, and I used to work on <a href="http://funtoo.org/">Funtoo</a>, as well as a fork of it Regen2 (which died by my hand). So I've got some experience working with BSD-ish style distro's. I can't comment on the Debians or Red Hats of the world, other than REPO HELL DRIVES ME NUTS. Now to the topic. <a href="http://semver.org/">Semver</a> seems sane except for 1 thing that it doesn't mention and an example that encourages it.<br /><br /><blockquote>A normal version number MUST take the form X.Y.Z where X, Y, and Z are integers. X is the major version, Y is the minor version, and Z is the patch version. Each element MUST increase numerically. For instance: 1.9.0 < 1.10.0 < 1.11.0.</blockquote><br /><br /><br />Not all packaging systems are capable of dealing with multipart as actual multiple parts. Lets give a more complete example to break it down. For instance: <code>1.9.0 < 1.10.0 < 1.11.0 < 2.0.0</code>. That's what's supposed to happen... but that's not how it works. Arch for example see's versions as strings... so let me show you what happens.<br /><br /><code><pre>190<br />1100<br />1110<br />200<br /></pre></code><br /><br />This is essentially what you could interpret the "."'s are essentially ignored ( Ok it's not actually how it works... juster's comment is more accurate than me but I think it's a good rule of thumb). They don't matter they're like spaces between words, they simply make it easier for a human to read. Never ever, <em>ever</em>, <em><strong>EVER!</strong></em> change the length of your versions to anything BUT larger. You will cause downstream annoyances, sure we've tools to work around it, but I don't want to and it shouldn't take any extra effort from upstream to make sure this doesn't happen.<br /><br />In order to solve this if you ever need to move anything to double digits just don't go backwards. In other words: <code>1.9.0 < 1.10.0 < 1.11.0 < 2.00.0</code> would actually evaluate properly. I find it more likely that in an X.Y.Z schema that you will need X.Y.ZZ though, and maybe X.YY.ZZ. For a project More than 10 years old XX.YY.ZZ could happen. Anything more is probably ridiculous. If you find yourself hitting 99 slow your roll before you reach it by moving to a time based release, no more than once a month for example.<br /><br />Some people will say that Arch doesn't have a sane internal representation. Keep in mind that maintain over 300 package now for arch... of those 300 maybe 10 have ever caused me to create a workaround because of this issue. It's not difficult, so please just be considerate of downstream, it's a lot easier to acknowledge and be mindful of this than it is to fix downstream in a way that would work for all upstream packages (e.g. we've got more to consider that just your package).<br /><br />UPDATE: Read juster's comment if you want more information on actual implementation and how I'm slightly wrong.<div class="blogger-post-footer"><br />--<br />
This <span xmlns:dc="http://purl.org/dc/elements/1.1/" href="http://purl.org/dc/dcmitype/Text" rel="dc:type">work</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.xenoterracide.com" property="cc:attributionName" rel="cc:attributionURL">Caleb Cushing</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.</div>
