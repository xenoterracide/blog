+++
title = "RT git workflow"
date = 2010-06-17T20:16:00Z
updated = 2010-06-17T20:18:11Z
tags = ["bugs", "RT",  "git", "patches"]
blogimport = true 
type = "post"
+++

git was designed to be very flexible in its workflow. One of the things it was designed to do was handle email patches, since there are a lot of patches sent to and from the mailing list. This is a good thing, even if you don't have a mailing list, or you have your own bug tracker (in addition to RT), you can use RT to receive email patches from git. First you have to configure your MUA (mail client)(and go write a patch), some suggestions are given in <a href="http://git.kernel.org/?p=git/git.git;a=blob;f=Documentation/SubmittingPatches;h=eb53e0636e3c3bab06e88ce3371945f5602c5756;hb=d0b8d79510cd9c45a4c6bc08a37c6348f8293e8a">git.git's SubmittingPatches document</a>. If you like the CLI I suggest you use the <code>git send-email</code> command. I'm going to walk you through using it, but you'll have to learn how to set it up for your smtp server on your own (one hint: if you don't provide an smtp pass as an argument or as a config option you will be prompted for it).<br /><br />now you have a patch that you haven't pushed yet. you can run one of the following sets of steps to get going.<br /><code><pre>git format-patch -M HEAD~1 # commitish. commit before the number of patches you want to generate<br />vi 0001-patch-name # and add some description between the --- and the diff stat<br />git send-email 0001-patch-name # can replace this step with MUA of choice<br /></pre></code> <br /><code><pre>git format-patch -M HEAD~5 # generate a patchset of the last 5 patches<br />git send-email --annotate *patch # will open the core.editor you set in gitconfig to edit the patch<br /></pre></code><br /><code><pre>git send-email --annotate --format-patch -M --to=destination-email origin/master<br /># generate all the patches that aren't committed against origin/master branch in your local branch<br /></pre></code><br /><br />for the time being you should probably just send it to one of your own projects on cpan so you can see. If you look at the web interface for the bug you'll notice it's clobbered your formatting, same goes with the email RT sends you... so this is useless right? well... certainly doesn't help... now look at the 'with headers' version. Their are lots of headers here, but all your content is intact. Now download this file (right click save as should do it).<br /><br />you may now ( you may have to run git reset --hard HEAD^ first to undo you last commit).<br /><code>git apply downloaded-file.txt</code><br /><br />which will only apply the diff no commit log or anything (reset without HEAD^ now).<br /><br />or you can <code>git am -i downloaded-file.txt</code> -i is interactive and will allow you to choose whole folders full of mail patches and which to apply.<br /><br />I think this is a good workflow for 1 off patches. obviously you don't send them to yourself, I'm just trying to show you what it's like to send and receive.<div class="blogger-post-footer"><br />--<br />
This <span xmlns:dc="http://purl.org/dc/elements/1.1/" href="http://purl.org/dc/dcmitype/Text" rel="dc:type">work</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.xenoterracide.com" property="cc:attributionName" rel="cc:attributionURL">Caleb Cushing</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.</div>
