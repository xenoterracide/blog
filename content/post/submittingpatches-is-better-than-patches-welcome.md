+++
title = "Submitting Patches is better than \"Patches Welcome\""
date = 2010-05-28T18:47:00Z
updated = 2010-06-02T19:36:45Z
tags = ["Regen2",  "policy", "Funtoo"]
blogimport = true 
type = "post"
+++

So I received my first patch for Perl code a week ago. Amazingly I didn't have to tell the person patches were welcome, they must have assumed so because my project was licensed under an OSI approved license. Also amazingly I've applied the patch even though it didn't meet my quality standards. I figure that's my fault though because no where did I document what those were.<br /><br />Back when I forked Regen2 from Funtoo one of the first things I did (and a reason for the fork) was create a policy for patch submission. The policy for Funtoo was that all patches were welcome, and I recall 2 patches by 1 user specifically that should have been 10 patches and 2 (or more) of those 10 patches should have been dropped, because they were doing things they shouldn't have. In order to create this policy as easily as possible, I stole Git's SubmittingPatches policy and modified it to work with Regen2.<br /><br />Once again I've been faced with patches that just aren't up to par. So once again I'm using Git's policy as a baseline for contributions to my projects. Here's the beginning of the documentation<br /><br /><blockquote>Checklist (and a short version for the impatient):<br /><br /> Commits:<br /><br /> - make commits of logical units<br /> - check for unnecessary whitespace with "git diff --check"<br />   before committing<br /> - do not check in commented out code or unneeded files<br /> - the first line of the commit message should be a short<br />   description and should skip the full stop<br /> - the body should provide a meaningful commit message, which:<br />  - uses the imperative, present tense: "change",<br />    not "changed" or "changes".<br />  - includes motivation for the change, and contrasts<br />    its implementation with previous behaviour<br /> - if you want your work included in the main repository, add a<br />   "Signed-off-by: Your Name <you@example.com>" line to the<br />   commit message (or just use the option "-s" when<br />   committing) to confirm that you agree to the Developer's<br />   Certificate of Origin<br /> - make sure that you have tests for the bug you are fixing<br /> - make sure that the test suite passes after your commit<br /><br /> Patch:<br /><br /> - use "git format-patch -M" to create the patch<br /> - do not PGP sign your patch<br /> - be careful doing cut & paste, not to corrupt whitespaces.<br /> - provide additional information (which is unsuitable for<br />   the commit message) between the "---" and the diffstat<br /> - if you change, add, or remove any features or<br />   make some other user interface change, the associated<br />   documentation should be updated as well.<br /> - if your name is not writable in ASCII, make sure that<br />   you send the patch in the correct encoding.<br /><br />Long version:<br /><a href="http://github.com/xenoterracide/Template-ShowStartStop/blob/build/master/SubmittingPatches">...</a><br /></blockquote><br />The only part I added was to add documentation for features. Obviously some parts under patch need modification as I'm not using a mailing list.<br /><br />Obviously <a href="http://xenoterracide.blogspot.com/2010/05/dont-say-patches-welcome.html">part of the reason I don't like "Patches welcome"</a> is I've seen that policy lead to the acceptance of really bad patches. Now obviously I make mistakes, everyone makes mistakes, but patches can be improved before they are committed. Even good patches can be flat out rejected for other reasons (I've had this happen. The consensus was not that the patch was bad, but the entire script need to be rewritten).<br /><br />So what was wrong with this patch if I accepted it? well essentially it wasn't a git patch and it was applied to the wrong directory (because I had the original source in src/ and the generated a / I'm not using CommitBuild to another branch) and, it also broke my test suite (even though it was a patch for a test. The breakage was a bug in another test).<br /><br />In any event, I believe that having your project be "Open Source" and having a patch submission policy does more to say "Patches Welcome" than "Patches Welcome". You don't have to agree with that, but regardless of whether you do, or not, I think having a policy is a good thing.<br /><br />P.S. Trolling posts will be deleted. Be constructive or talk elsewhere.<div class="blogger-post-footer"><br />--<br />
This <span xmlns:dc="http://purl.org/dc/elements/1.1/" href="http://purl.org/dc/dcmitype/Text" rel="dc:type">work</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.xenoterracide.com" property="cc:attributionName" rel="cc:attributionURL">Caleb Cushing</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.</div>
